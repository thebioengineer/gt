<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Column labels can be modified from their default values (the names of the
columns from the input table data). When you create a gt table object
using gt(), column names effectively become the column labels. While this
serves as a good first approximation, column names as label defaults aren't
often as appealing in a gt table as the option for custom column labels.
The cols_label() function provides the flexibility to relabel one or more
columns and we even have the option to use the md() or html() helper
functions for rendering column labels from Markdown or using HTML."><title>Relabel one or more columns — cols_label • gt</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Relabel one or more columns — cols_label"><meta property="og:description" content="Column labels can be modified from their default values (the names of the
columns from the input table data). When you create a gt table object
using gt(), column names effectively become the column labels. While this
serves as a good first approximation, column names as label defaults aren't
often as appealing in a gt table as the option for custom column labels.
The cols_label() function provides the flexibility to relabel one or more
columns and we even have the option to use the md() or html() helper
functions for rendering column labels from Markdown or using HTML."><meta property="og:image" content="https://gt.rstudio.com/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">gt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.9.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/intro-creating-gt-tables.html">Intro</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/case-study-clinical-tables.html">Case Study: Clinical Tables</a>
    <a class="dropdown-item" href="../articles/case-study-gtcars.html">Case Study: gtcars</a>
    <a class="dropdown-item" href="../articles/creating-summary-lines.html">Creating Summary Lines</a>
    <a class="dropdown-item" href="../articles/gt-datasets.html">gt Datasets</a>
    <a class="dropdown-item" href="../articles/intro-creating-gt-tables.html">Introduction to Creating gt Tables</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rstudio/gt/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Relabel one or more columns</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/gt/blob/HEAD/R/modify_columns.R" class="external-link"><code>R/modify_columns.R</code></a></small>
      <div class="d-none name"><code>cols_label.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Column labels can be modified from their default values (the names of the
columns from the input table data). When you create a <strong>gt</strong> table object
using <code><a href="gt.html">gt()</a></code>, column names effectively become the column labels. While this
serves as a good first approximation, column names as label defaults aren't
often as appealing in a <strong>gt</strong> table as the option for custom column labels.
The <code>cols_label()</code> function provides the flexibility to relabel one or more
columns and we even have the option to use the <code><a href="md.html">md()</a></code> or <code><a href="html.html">html()</a></code> helper
functions for rendering column labels from Markdown or using HTML.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cols_label</span><span class="op">(</span><span class="va">.data</span>, <span class="va">...</span>, .list <span class="op">=</span> <span class="fu">list2</span><span class="op">(</span><span class="va">...</span><span class="op">)</span>, .fn <span class="op">=</span> <span class="cn">NULL</span>, .process_units <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>.data</dt>
<dd><p><em>The gt table data object</em></p>
<p><code>obj:&lt;gt_tbl&gt;</code> // <strong>required</strong></p>
<p>This is the <strong>gt</strong> table object that is commonly created through use of the
<code><a href="gt.html">gt()</a></code> function.</p></dd>


<dt>...</dt>
<dd><p><em>Column label assignments</em></p>
<p><code>&lt;multiple expressions&gt;</code> // <strong>required</strong> (or, use <code>.list</code>)</p>
<p>Expressions for the assignment of column labels for the table columns in
<code>.data</code>. Two-sided formulas (e.g., <code>&lt;LHS&gt; ~ &lt;RHS&gt;</code>) can be used, where the
left-hand side corresponds to selections of columns and the right-hand side
evaluates to single-length values for the label to apply. Column names
should be enclosed in <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>. Select helpers like <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with()</a></code>,
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches()</a></code>, <code><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of()</a></code>, and <code><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything()</a></code>
can be used in the LHS. Named arguments are also valid as input for simple
mappings of column name to label text; they should be of the form <code>&lt;column name&gt; = &lt;label&gt;</code>. Subsequent expressions that operate on the columns
assigned previously will result in overwriting column label values.</p></dd>


<dt>.list</dt>
<dd><p><em>Alternative to <code>...</code></em></p>
<p><code>&lt;list of multiple expressions&gt;</code> // <strong>required</strong> (or, use <code>...</code>)</p>
<p>Allows for the use of a list as an input alternative to <code>...</code>.</p></dd>


<dt>.fn</dt>
<dd><p><em>Function to apply</em></p>
<p><code>function</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)</p>
<p>An option to specify a function that will be applied to all of the provided
label values.</p></dd>


<dt>.process_units</dt>
<dd><p><em>Option to process any available units throughout</em></p>
<p><code>scalar&lt;logical&gt;</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)</p>
<p>Should your column text contain text that is already in <strong>gt</strong>'s units
notation (and, importantly, is surrounded by <code>"{{"</code>/<code>"}}"</code>), using <code>TRUE</code>
here reprocesses all column such that the units are properly registered for
each of the column labels. This ignores any column label assignments in
<code>...</code> or <code>.list</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An object of class <code>gt_tbl</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="a-note-on-column-names-and-column-labels">A note on column names and column labels<a class="anchor" aria-label="anchor" href="#a-note-on-column-names-and-column-labels"></a></h2>
    


<p>It's important to note that while columns can be freely relabeled, we
continue to refer to columns by their original column names. Column names in
a tibble or data frame must be unique whereas column labels in <strong>gt</strong> have
no requirement for uniqueness (which is useful for labeling columns as, say,
measurement units that may be repeated several times---usually under
different spanner labels). Thus, we can still easily distinguish
between columns in other <strong>gt</strong> function calls (e.g., in all of the
<code>fmt*()</code> functions) even though we may lose distinguishability between column
labels once they have undergone relabeling.</p>
    </div>
    <div class="section level2">
    <h2 id="incorporating-units-with-gt-s-units-notation">Incorporating units with <strong>gt</strong>'s units notation<a class="anchor" aria-label="anchor" href="#incorporating-units-with-gt-s-units-notation"></a></h2>
    


<p>Measurement units are often seen as part of column labels and indeed it can
be much more straightforward to include them here rather than using other
devices to make readers aware of units for specific columns. The <strong>gt</strong>
package offers the function <code><a href="cols_units.html">cols_units()</a></code> to apply units to various columns
with an interface that's similar to that of this function. However, it is
also possible to define units here along with the column label, obviating the
need for pattern syntax that joins the two text components. To do this, we
have to surround the portion of text in the label that corresponds to the
units definition with <code>"{{"</code>/<code>"}}"</code>.</p>
<p>Now that we know how to mark text for units definition, we know need to know
how to write proper units with the notation. Such notation uses a succinct
method of writing units and it should feel somewhat familiar though it is
particular to the task at hand. Each unit is treated as a separate entity
(parentheses and other symbols included) and the addition of subscript text
and exponents is flexible and relatively easy to formulate. This is all best
shown with a few examples:</p><ul><li><p><code>"m/s"</code> and <code>"m / s"</code> both render as <code>"m/s"</code></p></li>
<li><p><code>"m s^-1"</code> will appear with the <code>"-1"</code> exponent intact</p></li>
<li><p><code>"m \s"</code> gives the the same result, as <code>"\&lt;unit&gt;"</code> is equivalent to
<code>"&lt;unit&gt;^-1"</code></p></li>
<li><p><code>"E_h"</code> will render an <code>"E"</code> with the <code>"h"</code> subscript</p></li>
<li><p><code>"t_i^2.5"</code> provides a <code>t</code> with an <code>"i"</code> subscript and a <code>"2.5"</code> exponent</p></li>
<li><p><code>"m[_0^2]"</code> will use overstriking to set both scripts vertically</p></li>
<li><p><code>"g/L %C6H12O6%"</code> uses a chemical formula (enclosed in a pair of <code>"%"</code>
characters) as a unit partial, and the formula will render correctly with
subscripted numbers</p></li>
<li><p>Common units that are difficult to write using ASCII text may be implicitly
converted to the correct characters (e.g., the <code>"u"</code> in <code>"ug"</code>, <code>"um"</code>,
<code>"uL"</code>, and <code>"umol"</code> will be converted to the Greek <em>mu</em> symbol; <code>"degC"</code>
and <code>"degF"</code> will render a degree sign before the temperature unit)</p></li>
<li><p>We can transform shorthand symbol/unit names enclosed in <code>":"</code> (e.g.,
<code>":angstrom:"</code>, <code>":ohm:"</code>, etc.) into proper symbols</p></li>
<li><p>The components of a unit (unit name, subscript, and exponent) can be
fully or partially italicized/emboldened by surrounding text with <code>"*"</code> or
<code>"**"</code></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h2>
    


<p>Let's use a portion of the <code><a href="countrypops.html">countrypops</a></code> dataset to create a <strong>gt</strong> table.
Relabel all the table's columns with the <code>cols_label()</code> function to improve
its presentation. In this simple case we are supplying the name of the column
on the left-hand side, and the label text on the right-hand side.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">countrypops</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"code"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">country_name</span> <span class="op">==</span> <span class="st">"Mongolia"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_label.html">cols_label</a></span><span class="op">(</span></span>
<span>    country_name <span class="op">=</span> <span class="st">"Name"</span>,</span>
<span>    year <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span>    population <span class="op">=</span> <span class="st">"Population"</span></span>
<span>  <span class="op">)</span></span></code></pre><p></p></div>
<p><img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_cols_label_1.png" alt="This image of a table was generated from the first code example in the `cols_label()` help file." style="width:100%;"></p>
<p>Using the <code><a href="countrypops.html">countrypops</a></code> dataset again, we label columns similarly to before
but this time making the column labels be bold through Markdown formatting
(with the <code><a href="md.html">md()</a></code> helper function). It's possible here to use either a <code>=</code> or
a <code>~</code> between the column name and the label text.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">countrypops</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"code"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">country_name</span> <span class="op">==</span> <span class="st">"Mongolia"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_label.html">cols_label</a></span><span class="op">(</span></span>
<span>    country_name <span class="op">=</span> <span class="fu"><a href="../reference/md.html">md</a></span><span class="op">(</span><span class="st">"**Name**"</span><span class="op">)</span>,</span>
<span>    year <span class="op">=</span> <span class="fu"><a href="../reference/md.html">md</a></span><span class="op">(</span><span class="st">"**Year**"</span><span class="op">)</span>,</span>
<span>    <span class="va">population</span> <span class="op">~</span> <span class="fu"><a href="../reference/md.html">md</a></span><span class="op">(</span><span class="st">"**Population**"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre><p></p></div>
<p><img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_cols_label_2.png" alt="This image of a table was generated from the second code example in the `cols_label()` help file." style="width:100%;"></p>
<p>With a select portion of the <code><a href="metro.html">metro</a></code> dataset, let's create a small <strong>gt</strong>
table with three columns. Within <code>cols_label()</code> we'd like to provide column
labels that contain line breaks. For that, we can use <code>&lt;br&gt;</code> to indicate
where the line breaks should be. We also need to use the <code><a href="md.html">md()</a></code> helper
function to signal to <strong>gt</strong> that this text should be interpreted as
Markdown. Instead of calling <code><a href="md.html">md()</a></code> on each of labels as before, we can more
conveniently use the <code>.fn</code> argument and provide the bare function there (it
will be applied to each label defined in the <code>cols_label()</code> call).</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">metro</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">lines</span>, <span class="va">passengers</span>, <span class="va">connect_other</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">passengers</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_hide.html">cols_hide</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="va">passengers</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_label.html">cols_label</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Name of&lt;br&gt;Metro Station"</span>,</span>
<span>    lines <span class="op">=</span> <span class="st">"Metro&lt;br&gt;Lines"</span>,</span>
<span>    connect_other <span class="op">=</span> <span class="st">"Train&lt;br&gt;Services"</span>,</span>
<span>    .fn <span class="op">=</span> <span class="va">md</span></span>
<span>  <span class="op">)</span></span></code></pre><p></p></div>
<p><img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_cols_label_3.png" alt="This image of a table was generated from the third code example in the `cols_label()` help file." style="width:100%;"></p>
<p>Using a subset of the <code><a href="towny.html">towny</a></code> dataset, we can create an interesting <strong>gt</strong>
table. First, only certain columns are selected from the dataset, some
filtering of rows is done, rows are sorted, and then only the first 10 rows
are kept. When introduced to <code><a href="gt.html">gt()</a></code>, we apply some spanner labels through two
calls of <code><a href="tab_spanner.html">tab_spanner()</a></code> all the table's columns. Below those spanners, we
want to label the columns by the years of interest. Using <code>cols_label()</code> and
select expressions on the left side of the formulas, we can easily relabel
multiple columns with common label text. Note that we cannot use an <code>=</code> sign
in any of the expressions within <code>cols_label()</code>; because the left-hand side
is not a single column name, we must use formula syntax (i.e., with the <code>~</code>).</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">towny</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="va">name</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with</a></span><span class="op">(</span><span class="st">"2001"</span><span class="op">)</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with</a></span><span class="op">(</span><span class="st">"2006"</span><span class="op">)</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"2001_2006"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">population_2001</span> <span class="op">&gt;</span> <span class="fl">100000</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">pop_change_2001_2006_pct</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fmt_integer.html">fmt_integer</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fmt_percent.html">fmt_percent</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"change"</span><span class="op">)</span>, decimals <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tab_spanner.html">tab_spanner</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Population"</span>, columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"population"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tab_spanner.html">tab_spanner</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Density"</span>, columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"density"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_label.html">cols_label</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with</a></span><span class="op">(</span><span class="st">"01"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"2001"</span>,</span>
<span>    <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with</a></span><span class="op">(</span><span class="st">"06"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"2006"</span>,</span>
<span>    <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"change"</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="../reference/md.html">md</a></span><span class="op">(</span><span class="st">"Population Change,&lt;br&gt;2001 to 2006"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_width.html">cols_width</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="../reference/px.html">px</a></span><span class="op">(</span><span class="fl">120</span><span class="op">)</span><span class="op">)</span></span></code></pre><p></p></div>
<p><img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_cols_label_4.png" alt="This image of a table was generated from the fourth code example in the `cols_label()` help file." style="width:100%;"></p>
<p>Here's another table that uses the <code><a href="towny.html">towny</a></code> dataset. The big difference
compared to the previous <em>gt</em> table is that <code>cols_label()</code> as used here
incorporates unit notation text (within <code>"{{"</code>/<code>"}}"</code>).</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">towny</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="va">name</span>, <span class="va">population_2021</span>, <span class="va">density_2021</span>, <span class="va">land_area_km2</span>, <span class="va">latitude</span>, <span class="va">longitude</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">population_2021</span> <span class="op">&gt;</span> <span class="fl">100000</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">population_2021</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fmt_integer.html">fmt_integer</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="va">population_2021</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fmt_number.html">fmt_number</a></span><span class="op">(</span></span>
<span>    columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">density_2021</span>, <span class="va">land_area_km2</span><span class="op">)</span>,</span>
<span>    decimals <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fmt_number.html">fmt_number</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="va">latitude</span>, decimals <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/fmt_number.html">fmt_number</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="va">longitude</span>, decimals <span class="op">=</span> <span class="fl">2</span>, scale_by <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_label.html">cols_label</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"population"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Population"</span>,</span>
<span>    <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"density"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Density, {{*persons* km^-2}}"</span>,</span>
<span>    <span class="va">land_area_km2</span> <span class="op">~</span> <span class="st">"Area, {{km^2}}"</span>,</span>
<span>    <span class="va">latitude</span> <span class="op">~</span> <span class="st">"Latitude, {{:degrees:N}}"</span>,</span>
<span>    <span class="va">longitude</span> <span class="op">~</span> <span class="st">"Longitude, {{:degrees:W}}"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_width.html">cols_width</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="../reference/px.html">px</a></span><span class="op">(</span><span class="fl">120</span><span class="op">)</span><span class="op">)</span></span></code></pre><p></p></div>
<p><img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_cols_label_5.png" alt="This image of a table was generated from the fifth code example in the `cols_label()` help file." style="width:100%;"></p>
<p>The <code><a href="illness.html">illness</a></code> dataset has units within the <code>units</code> column. They're
formatted in just the right way for <strong>gt</strong> too. Let's do some text
manipulation through <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">dplyr::mutate()</a></code> and some pivoting with
<strong>tidyr</strong>'s <code>pivot_longer()</code> and <code>pivot_wider()</code> in order to include the
units as part of the column names in the reworked table. These column names
are in a format where the units are included within <code>"{{"</code>/<code>"}}"</code>, so, we can
use <code>cols_label()</code> with the <code>.process_units = TRUE</code> option to register the
measurement units. In addition to this, because there is a <code>&lt;br&gt;</code> included
(for a line break), we should use the <code>.fn</code> option and provide the <code><a href="md.html">md()</a></code>
helper function (as a bare function name). This ensures that any linebreaks
do materialize.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">illness</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>test <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">test</span>, <span class="st">",&lt;br&gt;{{"</span>, <span class="va">units</span>, <span class="st">"}}"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">8</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"norm"</span><span class="op">)</span>, <span class="va">units</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"day"</span><span class="op">)</span>,</span>
<span>    names_to <span class="op">=</span> <span class="st">"day"</span>,</span>
<span>    names_prefix <span class="op">=</span> <span class="st">"day_"</span>,</span>
<span>    values_to <span class="op">=</span> <span class="st">"value"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span></span>
<span>    names_from <span class="op">=</span> <span class="va">test</span>,</span>
<span>    values_from <span class="op">=</span> <span class="va">value</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/gt.html">gt</a></span><span class="op">(</span>rowname_col <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/tab_stubhead.html">tab_stubhead</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Day"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_label.html">cols_label</a></span><span class="op">(</span></span>
<span>    .fn <span class="op">=</span> <span class="va">md</span>,</span>
<span>    .process_units <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/cols_width.html">cols_width</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/stub.html">stub</a></span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="../reference/px.html">px</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="../reference/px.html">px</a></span><span class="op">(</span><span class="fl">120</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre><p></p></div>
<p><img src="https://raw.githubusercontent.com/rstudio/gt/master/images/man_cols_label_6.png" alt="This image of a table was generated from the sixth code example in the `cols_label()` help file." style="width:100%;"></p>
    </div>
    <div class="section level2">
    <h2 id="function-id">Function ID<a class="anchor" aria-label="anchor" href="#function-id"></a></h2>
    

<p>5-4</p>
    </div>
    <div class="section level2">
    <h2 id="function-introduced">Function Introduced<a class="anchor" aria-label="anchor" href="#function-introduced"></a></h2>
    

<p><code>v0.2.0.5</code> (March 31, 2020)</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other column modification functions: 
<code><a href="cols_add.html">cols_add</a>()</code>,
<code><a href="cols_align_decimal.html">cols_align_decimal</a>()</code>,
<code><a href="cols_align.html">cols_align</a>()</code>,
<code><a href="cols_hide.html">cols_hide</a>()</code>,
<code><a href="cols_label_with.html">cols_label_with</a>()</code>,
<code><a href="cols_merge_n_pct.html">cols_merge_n_pct</a>()</code>,
<code><a href="cols_merge_range.html">cols_merge_range</a>()</code>,
<code><a href="cols_merge_uncert.html">cols_merge_uncert</a>()</code>,
<code><a href="cols_merge.html">cols_merge</a>()</code>,
<code><a href="cols_move_to_end.html">cols_move_to_end</a>()</code>,
<code><a href="cols_move_to_start.html">cols_move_to_start</a>()</code>,
<code><a href="cols_move.html">cols_move</a>()</code>,
<code><a href="cols_unhide.html">cols_unhide</a>()</code>,
<code><a href="cols_units.html">cols_units</a>()</code>,
<code><a href="cols_width.html">cols_width</a>()</code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Richard Iannone, Joe Cheng, Barret Schloerke, Ellis Hughes, Alexandra Lauer, <a href="https://jooyoungseo.github.io/" class="external-link">JooYoung Seo</a>, Posit Software, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

